<div class="px-4 sm:px-6 lg:px-8 pb-10">

    <div class="sm:flex sm:items-center">
        <div class="sm:flex-auto">
            <erp-header [title]="['Editar cliente', 'Edita los datos de un cliente / prospecto']" />
        </div>
        <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
            <a [routerLink]="['../']" class="block rounded-md bg-indigo-600 py-2 px-3 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                Regresar
            </a>
        </div>
    </div>
    <div class="mt-4 flow-root">
        <form class="space-y-8 divide-y divide-gray-200" [formGroup]="form" (ngSubmit)="edit()">
           
            <div class="space-b-8 divide-b divide-gray-200">

                <div class="text-right mt-2">
                    <h3 class="text-sm font-normal leading-6 text-gray-500">
                        Datos del cliente
                    </h3>
                    <p class="mt-1 text-xs text-gray-400">
                        Registro de los datos de un cliente / prospecto
                    </p>
                </div>
                <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    
                    <div class="sm:col-span-3 relative input-group">
                        <label for="legalName">
                            Nombre <span>*</span>
                        </label>
                        <input type="text" name="legalName" id="legalName" formControlName="legalName" placeholder="Nombre de la empresa">
                        <p *ngIf="ctrl['legalName'].touched && ctrl['legalName'].errors" id="legalName-error">
                            <ng-container *ngIf="ctrl['legalName'].hasError('required')">
                                El campo es obligatorio
                            </ng-container>
                        </p>
                    </div>

                    <div class="sm:col-span-3 relative input-group">
                        <label for="type">
                            Tipo <span>*</span>
                        </label>
                        <select name="type" id="type" formControlName="type">
                            <option value="">Seleccione una opción</option>
                            <option *ngFor="let type of types" [value]="type.key">{{type.value}}</option>
                        </select>
                        <p *ngIf="ctrl['type'].touched && ctrl['type'].errors" id="type-error">
                            <ng-container *ngIf="ctrl['type'].hasError('required')">
                                El campo es obligatorio
                            </ng-container>
                        </p>
                    </div>

                    <ng-container formGroupName="bussinessActivity">
                        <div class="sm:col-span-3 relative input-group">
                            <label for="activity">
                                Giro empresarial <span>*</span>
                            </label>
                            <select name="activity" id="activity" formControlName="activity">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let activity of activities" [value]="activity.key">{{activity.value}}</option>
                            </select>
                            <p *ngIf="ctrl['bussinessActivity'].get('activity')?.touched && ctrl['bussinessActivity'].get('activity')?.errors" id="activity-error">
                                <ng-container *ngIf="ctrl['bussinessActivity'].get('activity')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>
    
                        <div class="sm:col-span-3 relative input-group">
                            <label for="description">
                                Descripción del giro <span>*</span>
                            </label>
                            <input type="text" name="description" id="description" formControlName="description" placeholder="Descripción">
                            <p *ngIf="ctrl['bussinessActivity'].get('description')?.touched && ctrl['bussinessActivity'].get('description')?.errors" id="description-error">
                                <ng-container *ngIf="ctrl['bussinessActivity'].get('description')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>
                    </ng-container>

                    <ng-container formGroupName="contact">
                        <div class="sm:col-span-2 relative input-group">
                            <label for="email">
                                Correo <span>*</span>
                            </label>
                            <input type="email" name="email" id="email" formControlName="email" placeholder="Correo">
                            <p *ngIf="ctrl['contact'].get('email')?.touched && ctrl['contact'].get('email')?.errors" id="email-error">
                                <ng-container *ngIf="ctrl['contact'].get('email')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['contact'].get('email')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="phone">
                                Télefono <span>*</span>
                            </label>
                            <input type="text" name="phone" id="phone" formControlName="phone" placeholder="Télefono">
                            <p *ngIf="ctrl['contact'].get('phone')?.touched && ctrl['contact'].get('phone')?.errors" id="phone-error">
                                <ng-container *ngIf="ctrl['contact'].get('phone')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['contact'].get('phone')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="web">
                                Página web
                            </label>
                            <input type="text" name="web" id="web" formControlName="web" placeholder="Correo" 
                                class="block w-full rounded-md border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                        </div>

                        <!-- <ng-container nameFormArray="contactPersonalized">
                            <ng-container nameFormGroup="">
                                <div class="sm:col-span-2 relative input-group">
                                    <label for="phone"
                                        class="absolute -top-2 left-2 inline-block bg-white px-1 text-xs font-medium text-gray-900">
                                            Télefono <span>*</span>
                                    </label>
                                    <input type="text" name="phone" id="phone" formControlName="phone" placeholder="Télefono" 
                                        class="block w-full rounded-md border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                                    <p *ngIf="ctrl['contact'].get('phone')?.touched && ctrl['contact'].get('phone')?.errors" id="phone-error">
                                        <ng-container *ngIf="ctrl['contact'].get('phone')?.hasError('required')">
                                            El campo es obligatorio
                                        </ng-container>
                                        <ng-container *ngIf="ctrl['contact'].get('phone')?.hasError('pattern')">
                                            El campo no es válido
                                        </ng-container>
                                    </p>
                                </div>
                            </ng-container>
                        </ng-container> -->
                    </ng-container>

                </div>

            </div>

            <div class="space-b-8 divide-b divide-gray-200">

                <div class="text-right mt-2">
                    <p class="mt-1 text-xs text-gray-400">
                        Dirección
                    </p>
                </div>
                <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">

                     <ng-container formGroupName="address">
                        <div class="sm:col-span-3 relative input-group">
                            <label for="street">
                                Calle <span>*</span>
                            </label>
                            <input type="text" name="street" id="street" formControlName="street" placeholder="Calle">
                            <p *ngIf="ctrl['address'].get('street')?.touched && ctrl['address'].get('street')?.errors" id="street-error">
                                <ng-container *ngIf="ctrl['address'].get('street')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="exterior">
                                No. exterior <span>*</span>
                            </label>
                            <input type="text" name="exterior" id="exterior" formControlName="exterior" placeholder="No. exterior">
                            <p *ngIf="ctrl['address'].get('exterior')?.touched && ctrl['address'].get('exterior')?.errors" id="exterior-error">
                                <ng-container *ngIf="ctrl['address'].get('exterior')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-1 relative input-group">
                            <label for="interior">
                                No. interior
                            </label>
                            <input type="text" name="interior" id="interior" formControlName="interior" placeholder="No. interior">
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="neighborhood">
                                Colonia <span>*</span>
                            </label>
                            <input type="text" name="neighborhood" id="neighborhood" formControlName="neighborhood" placeholder="Colonia">
                            <p *ngIf="ctrl['address'].get('neighborhood')?.touched && ctrl['address'].get('neighborhood')?.errors" id="neighborhood-error">
                                <ng-container *ngIf="ctrl['address'].get('neighborhood')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="city">
                                Ciudad <span>*</span>
                            </label>
                            <input type="text" name="city" id="city" formControlName="city" placeholder="Ciudad">
                            <p *ngIf="ctrl['address'].get('city')?.touched && ctrl['address'].get('city')?.errors" id="city-error">
                                <ng-container *ngIf="ctrl['address'].get('city')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="municipality">
                                Municipio <span>*</span>
                            </label>
                            <input type="text" name="municipality" id="municipality" formControlName="municipality" placeholder="Municipio">
                            <p *ngIf="ctrl['address'].get('municipality')?.touched && ctrl['address'].get('municipality')?.errors" id="municipality-error">
                                <ng-container *ngIf="ctrl['address'].get('municipality')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-3 relative input-group">
                            <label for="state">
                                Estado <span>*</span>
                            </label>
                            <input type="text" name="state" id="state" formControlName="state" placeholder="Estado">
                            <p *ngIf="ctrl['address'].get('state')?.touched && ctrl['address'].get('state')?.errors" id="state-error">
                                <ng-container *ngIf="ctrl['address'].get('state')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="country">
                                País <span>*</span>
                            </label>
                            <input type="text" name="country" id="country" formControlName="country" placeholder="País">
                            <p *ngIf="ctrl['address'].get('country')?.touched && ctrl['address'].get('country')?.errors" id="country-error">
                                <ng-container *ngIf="ctrl['address'].get('country')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-1 relative input-group">
                            <label for="zip">
                                Codigo postal <span>*</span>
                            </label>
                            <input type="text" name="zip" id="zip" formControlName="zip" placeholder="Codigo postal">
                            <p *ngIf="ctrl['address'].get('zip')?.touched && ctrl['address'].get('zip')?.errors" id="zip-error">
                                <ng-container *ngIf="ctrl['address'].get('zip')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['address'].get('zip')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <ng-container formGroupName="streets">
                            <div class="sm:col-span-3 relative input-group">
                                <label for="a">
                                    Entre calle
                                </label>
                                <input type="text" name="a" id="a" formControlName="a" placeholder="Entre calle">
                            </div>

                            <div class="sm:col-span-3 relative input-group">
                                <label for="b">
                                    Y calle
                                </label>
                                <input type="text" name="b" id="b" formControlName="b" placeholder="Y calle">
                            </div>
                        </ng-container>
                    </ng-container>

                </div>

            </div>

            <div class="space-b-8 divide-b divide-gray-200">

                <div class="text-right mt-2">
                    <p class="mt-1 text-xs text-gray-400">
                        Datos facturación
                    </p>
                </div>
                <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
                    <!-- [disableContainer]="ctrl['type'].value === 'CLIENT'" -->
                    <ng-container formGroupName="tax">
                        <div class="sm:col-span-2 relative input-group">
                            <label for="taxID">
                                RFC <span>*</span>
                            </label>
                            <input type="text" name="taxID" id="taxID" formControlName="taxID" placeholder="RFC">
                            <p *ngIf="ctrl['tax'].get('taxID')?.touched && ctrl['tax'].get('taxID')?.errors" id="taxID-error">
                                <ng-container *ngIf="ctrl['tax'].get('taxID')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['tax'].get('taxID')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="taxSystem">
                                Régimen fiscal <span>*</span>
                            </label>
                            <select name="taxSystem" id="taxSystem" formControlName="taxSystem">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let system of taxSystems" [value]="system.key">{{system.key}} - {{system.value}}</option>
                            </select>
                            <p *ngIf="ctrl['tax'].get('taxSystem')?.touched && ctrl['tax'].get('taxSystem')?.errors" id="taxSystem-error">
                                <ng-container *ngIf="ctrl['tax'].get('taxSystem')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="taxEmail">
                                Correo de facturación <span>*</span>
                            </label>
                            <input type="text" name="taxEmail" id="taxEmail" formControlName="taxEmail" placeholder="Correo de facturación">
                            <p *ngIf="ctrl['tax'].get('taxEmail')?.touched && ctrl['tax'].get('taxEmail')?.errors" id="taxEmail-error">
                                <ng-container *ngIf="ctrl['tax'].get('taxEmail')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['tax'].get('taxEmail')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="daysOfExpiration">
                                Días de expiración <span>*</span>
                            </label>
                            <input type="text" name="daysOfExpiration" id="daysOfExpiration" formControlName="daysOfExpiration" placeholder="Días de expiración">
                            <p *ngIf="ctrl['tax'].get('daysOfExpiration')?.touched && ctrl['tax'].get('daysOfExpiration')?.errors" id="daysOfExpiration-error">
                                <ng-container *ngIf="ctrl['tax'].get('daysOfExpiration')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                                <ng-container *ngIf="ctrl['tax'].get('daysOfExpiration')?.hasError('pattern')">
                                    El campo no es válido
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-4 relative input-group">
                            <label for="use">
                                Uso de CFDI <span>*</span>
                            </label>
                            <select name="use" id="use" formControlName="use">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let use of uses" [value]="use.key">{{use.key}} - {{use.value}}</option>
                            </select>
                            <p *ngIf="ctrl['tax'].get('use')?.touched && ctrl['tax'].get('use')?.errors" id="use-error">
                                <ng-container *ngIf="ctrl['tax'].get('use')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="paymentForm">
                                Forma de pago <span>*</span>
                            </label>
                            <select name="paymentForm" id="paymentForm" formControlName="paymentForm">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let form of paymentForms" [value]="form.key">{{form.key}} - {{form.value}}</option>
                            </select>
                            <p *ngIf="ctrl['tax'].get('paymentForm')?.touched && ctrl['tax'].get('paymentForm')?.errors" id="paymentForm-error">
                                <ng-container *ngIf="ctrl['tax'].get('paymentForm')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="paymentMethod">
                                Metodo de pago <span>*</span>
                            </label>
                            <select name="paymentMethod" id="paymentMethod" formControlName="paymentMethod">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let method of paymentMethods" [value]="method.key">{{method.key}} - {{method.value}}</option>
                            </select>
                            <p *ngIf="ctrl['tax'].get('paymentMethod')?.touched && ctrl['tax'].get('paymentMethod')?.errors" id="paymentMethod-error">
                                <ng-container *ngIf="ctrl['tax'].get('paymentMethod')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>

                        <div class="sm:col-span-2 relative input-group">
                            <label for="currency">
                                Tipo de moneda <span>*</span>
                            </label>
                            <select name="currency" id="currency" formControlName="currency">
                                <option value="">Seleccione una opción</option>
                                <option *ngFor="let currency of currencies" [value]="currency.key">{{currency.key}} - {{currency.value}}</option>
                            </select>
                            <p *ngIf="ctrl['tax'].get('currency')?.touched && ctrl['tax'].get('currency')?.errors" id="currency-error">
                                <ng-container *ngIf="ctrl['tax'].get('currency')?.hasError('required')">
                                    El campo es obligatorio
                                </ng-container>
                            </p>
                        </div>
                    </ng-container>

                </div>

            </div>
          
            <div class="pt-5">
                <div class="flex justify-end">
                    <a [routerLink]="['../']" class="rounded-md bg-white py-2 px-3 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                        Cancel
                    </a>
                    <button type="submit" class="ml-3 inline-flex justify-center rounded-md bg-indigo-600 py-2 px-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-30">
                        Guardar
                    </button>
                </div>
            </div>

        </form>
    </div>

</div>